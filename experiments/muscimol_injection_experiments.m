% Days and locations of muscimol injections/washouts
%
% (these are all hard-coded for each mouse here, there's no current way to
% associate something like this with a day's experiments)


%% Initialize structure

init_cell = cell(0);
muscimol = struct('animal',init_cell,'day',init_cell,'area',init_cell);

%% Corticostriatal mice

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP092';
curr_recordings = {...
    '2021-04-13','AM'; ...
    '2021-04-14','washout'; ...
    '2021-04-16','V1'; ...
    '2021-04-17','washout'; ...
    '2021-04-19','FRm'; ...
    '2021-04-20','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP093';
curr_recordings = {...
    '2021-04-13','AM'; ...
    '2021-04-14','washout'; ...
    '2021-04-16','V1'; ...
    '2021-04-17','washout'; ...
    '2021-04-19','FRm'; ...
    '2021-04-20','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP094';
curr_recordings = {...
    '2021-04-13','AM'; ...
    '2021-04-14','washout'; ...
    '2021-04-16','V1'; ...
    '2021-04-17','washout'; ...
    '2021-04-19','FRm'; ...
    '2021-04-20','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP095';
curr_recordings = {...
    '2021-04-27','V1'; ...
    '2021-04-28','washout'; ...
    '2021-04-29','FRm'; ...
    '2021-04-30','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP096';
curr_recordings = {...
    '2021-04-27','V1'; ...
    '2021-04-28','washout'; ...
    '2021-04-29','FRm'; ...
    '2021-04-30','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP097';
curr_recordings = {...
    '2021-04-27','V1'; ...
    '2021-04-28','washout'; ...
    '2021-04-29','FRm'; ...
    '2021-04-30','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

%% tetO mice

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP100';
curr_recordings = {...
    '2021-05-17','V1'; ...
    '2021-05-18','washout'; ...
    '2021-05-19','FRm'; ...
    '2021-05-20','washout'; ...
    '2021-05-21','DCS'; ...
    '2021-05-24','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP101';
curr_recordings = {...
    '2021-06-14','FRm'; ...
    '2021-06-15','washout'; ...
    '2021-06-16','FRm'; ...
    '2021-06-17','washout'; ...
    '2021-06-18','V1'; ...
    '2021-06-21','DCS'; ...
    '2021-06-22','washout';};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);
    
curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP103';
curr_recordings = {...
    '2021-06-14','DCS'; ...
    '2021-06-15','washout'; ...
    '2021-06-16','V1'; ...
    '2021-06-17','washout'; ...
    '2021-06-18','FRm'; ...
    '2021-06-21','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);

curr_animal_idx = length(muscimol)+1;
muscimol(curr_animal_idx).animal = 'AP104';
curr_recordings = {...
    '2021-06-14','DCS'; ...
    '2021-06-15','washout'; ...
    '2021-06-16','FRm'; ...
    '2021-06-17','washout'; ...
    '2021-06-18','V1'; ...
    '2021-06-21','washout'};
muscimol(curr_animal_idx).day =  curr_recordings(:,1);
muscimol(curr_animal_idx).area =  curr_recordings(:,2);


%% Sanity check
% (check something: all days exist? days account for all experiments before
% ephys and after retinotopy?)

disp('Checking that days exist for each mouse...')
for curr_animal = 1:length(muscimol)
    % Get all experiments for animal
    animal = muscimol(curr_animal).animal;    
    experiments = AP_find_experiments(animal);
    
    % Make sure all the injection days exist
    check_days = all(ismember(muscimol(curr_animal).day,{experiments.day}));
    if ~check_days
       error([animal ': non-existent recording day'])
    end   
    AP_print_progress_fraction(curr_animal,length(muscimol));
end


%% Save

data_path = 'C:\Users\Andrew\OneDrive for Business\Documents\CarandiniHarrisLab\analysis\operant_learning\data';
save_fn = [data_path filesep 'muscimol.mat'];
save(save_fn,'muscimol');
disp(['Saved ' save_fn]);






